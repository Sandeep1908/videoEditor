(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{4960:function(){},6759:function(){},6272:function(){},9450:function(e,t,i){Promise.resolve().then(i.bind(i,5336)),Promise.resolve().then(i.bind(i,9297))},5336:function(e,t,i){"use strict";i.r(t),i.d(t,{Editor:function(){return H}});var a=i(9268),n=i(1003),s=i(6006),l=i(9297),r=i(2639);i(7596);let o=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Export"}),(0,a.jsxs)("div",{className:"px-[16px]",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center my-2",children:[(0,a.jsx)("div",{className:"text-xs font-semibold mr-2",children:"Video Length:"}),(0,a.jsx)("input",{type:"number",className:"rounded text-center border-slate-200 placeholder-slate-400 contrast-more:border-slate-400 contrast-more:placeholder-slate-500 max-w-[50px] mr-2",value:e.maxTime/1e3,onChange:t=>{let i=t.target.value;e.setMaxTime(1e3*Number(i))}}),(0,a.jsx)("div",{children:"secs"})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center my-2",children:[(0,a.jsx)("div",{className:"text-xs font-semibold mr-2",children:"Canvas Resolution:"}),(0,a.jsx)("div",{className:"text-xs mr-2",children:"Todo"})]})]}),(0,a.jsxs)("button",{className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-1 rounded-lg m-4",onClick:()=>{e.handleSeek(0),e.setSelectedElement(null),setTimeout(()=>{e.setPlaying(!0),e.saveCanvasToVideoWithAUdio()},1e3)},children:["Export Video (",e.maxTime/1e3," secs)"]})]})});var d=i(4821);let c={fadeIn:"Fade In",fadeOut:"Fade Out",slideIn:"Slide In",slideOut:"Slide Out",breath:"Breath"},m=(0,r.Pi)(e=>{let t=s.useContext(l.StoreContext);return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px] p-2",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,a.jsx)("div",{className:"text-white py-1 text-base text-left w-full",children:c[e.animation.type]}),(0,a.jsx)("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 text-lg",onClick:()=>t.removeAnimation(e.animation.id),children:(0,a.jsx)(d.ZkW,{size:"25"})})]}),"fadeIn"===e.animation.type||"fadeOut"===e.animation.type?(0,a.jsx)(h,{animation:e.animation}):null,"slideIn"===e.animation.type||"slideOut"===e.animation.type?(0,a.jsx)(p,{animation:e.animation}):null]})}),h=(0,r.Pi)(e=>{let t=s.useContext(l.StoreContext);return(0,a.jsx)("div",{className:"flex flex-col w-full items-start",children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[(0,a.jsx)("div",{className:"text-white text-xs",children:"Duration(s)"}),(0,a.jsx)("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"number",value:e.animation.duration/1e3,onChange:i=>{let a=1e3*Number(i.target.value),n=a>0?a:0;n<10&&(n=10),t.updateAnimation(e.animation.id,{...e.animation,duration:n})}})]})})}),p=(0,r.Pi)(e=>{let t=s.useContext(l.StoreContext);return(0,a.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[(0,a.jsx)("div",{className:"text-white text-xs",children:"Duration(s)"}),(0,a.jsx)("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"number",value:e.animation.duration/1e3,onChange:i=>{let a=1e3*Number(i.target.value),n=a>0?a:0;n<10&&(n=10),t.updateAnimation(e.animation.id,{...e.animation,duration:n})}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[(0,a.jsx)("div",{className:"text-white text-xs",children:"Direction"}),(0,a.jsxs)("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.animation.properties.direction,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,direction:i.target.value}})},children:[(0,a.jsx)("option",{value:"left",children:"Left"}),(0,a.jsx)("option",{value:"right",children:"Right"}),(0,a.jsx)("option",{value:"top",children:"Top"}),(0,a.jsx)("option",{value:"bottom",children:"Bottom"})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[(0,a.jsx)("div",{className:"text-white text-xs",children:"Use Mask"}),(0,a.jsx)("input",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",type:"checkbox",checked:e.animation.properties.useClipPath,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,useClipPath:i.target.checked}})}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between my-1",children:[(0,a.jsx)("div",{className:"text-white text-xs",children:"Type"}),(0,a.jsxs)("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.animation.properties.textType,onChange:i=>{t.updateAnimation(e.animation.id,{...e.animation,properties:{...e.animation.properties,textType:i.target.value}})},children:[(0,a.jsx)("option",{value:"none",children:"None"}),(0,a.jsx)("option",{value:"character",children:"Character"})]})]})]})});var u=i(2650);let x=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext),t=e.selectedElement,i=e.animations.filter(e=>e.targetId===(null==t?void 0:t.id)),n=i.some(e=>"fadeIn"===e.type),r=i.some(e=>"fadeOut"===e.type),o=i.some(e=>"slideOut"===e.type),d=i.some(e=>"breathe"===e.type);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Animations"}),t&&!n?(0,a.jsx)("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{var i;e.addAnimation({id:(0,u.sq)(),type:"fadeIn",targetId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",duration:1e3,properties:{}})},children:"Add Fade In"}):null,t&&!r?(0,a.jsx)("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{var i;e.addAnimation({id:(0,u.sq)(),type:"fadeOut",targetId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",duration:1e3,properties:{}})},children:"Add Fade Out"}):null,t&&!o?(0,a.jsx)("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{var i;e.addAnimation({id:(0,u.sq)(),type:"slideOut",targetId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",duration:1e3,properties:{direction:"right",useClipPath:!1,textType:"none"}})},children:"Add Slide Out"}):null,t&&!d?(0,a.jsx)("div",{className:"text-sm px-[16px] py-[8px] font-semibold hover:bg-slate-700 hover:text-white cursor-pointer",onClick:()=>{var i;e.addAnimation({id:(0,u.sq)(),type:"breathe",targetId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",duration:1e3,properties:{}})},children:"Add Breathing"}):null,i.map(e=>(0,a.jsx)(m,{animation:e},e.id))]})}),f=(0,r.Pi)(e=>{let{audio:t,index:i}=e,n=s.useContext(l.StoreContext),r=s.useRef(null),[o,c]=s.useState("00:00");return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px]",children:[(0,a.jsx)("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:o}),(0,a.jsx)("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>n.addAudio(i),children:(0,a.jsx)(d.x06,{size:"25"})}),(0,a.jsx)("audio",{onLoadedData:()=>{var e,t;let i=null!==(t=null===(e=r.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0;c((0,u.F2)(i))},ref:r,className:"max-h-[100px] max-w-[150px] min-h-[50px] min-w-[100px]",src:t,id:"audio-".concat(i)})]})}),g=e=>(0,a.jsxs)("label",{htmlFor:"fileInput",className:e.className,children:[(0,a.jsx)("input",{id:"fileInput",type:"file",accept:e.accept,className:"hidden",onChange:e.onChange}),"Upload"]}),v=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Add Audio"}),e.audios.map((e,t)=>(0,a.jsx)(f,{audio:e,index:t},e)),(0,a.jsx)(g,{accept:"audio/mp3,audio/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded",onChange:t=>{var i;let a=null===(i=t.target.files)||void 0===i?void 0:i[0];a&&e.addAudioResource(URL.createObjectURL(a))}})]})});var b=i(1014);let j=["#000000","#FFFFFF","#404040","#808080","#C0C0C0","#E0E0E0","#003366","#336699","#6699CC","#99CCFF","#990000","#CC3333","#FF6666","#663300","#996633","#CC9966","#006600","#339933","#66CC99","#FFFF00"],y=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Fill"}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(b.if,{colors:j,color:e.backgroundColor,onChangeComplete:t=>{console.log(t),e.setBackgroundColor(t.hex)}})})]})}),w=(0,r.Pi)(e=>{let{image:t,index:i}=e,n=s.useContext(l.StoreContext),r=s.useRef(null),[o,c]=s.useState({w:0,h:0});return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative",children:[(0,a.jsxs)("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:[o.w,"x",o.h]}),(0,a.jsx)("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>n.addImage(i),children:(0,a.jsx)(d.x06,{size:"25"})}),(0,a.jsx)("img",{onLoad:()=>{var e,t,i,a;c({w:null!==(i=null===(e=r.current)||void 0===e?void 0:e.naturalWidth)&&void 0!==i?i:0,h:null!==(a=null===(t=r.current)||void 0===t?void 0:t.naturalHeight)&&void 0!==a?a:0})},ref:r,className:"max-h-[100px] max-w-[150px]",src:t,height:200,width:200,id:"image-".concat(i)})]})}),C=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Add Image"}),e.images.map((e,t)=>(0,a.jsx)(w,{image:e,index:t},e)),(0,a.jsx)(g,{accept:"image/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded",onChange:t=>{var i;let a=null===(i=t.target.files)||void 0===i?void 0:i[0];a&&e.addImageResource(URL.createObjectURL(a))}})]})}),E=(0,r.Pi)(e=>{let{fontSize:t,fontWeight:i,sampleText:n}=e,r=s.useContext(l.StoreContext);return(0,a.jsxs)("div",{className:"items-center bg-slate-800 m-[15px] flex flex-row",children:[(0,a.jsx)("div",{className:"flex-1 text-white px-2 py-1",style:{fontSize:"".concat(t,"px"),fontWeight:"".concat(i)},children:n}),(0,a.jsx)("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1",onClick:()=>r.addText({text:n,fontSize:t,fontWeight:i}),children:(0,a.jsx)(d.x06,{size:"25"})})]})}),N=(0,r.Pi)(()=>(0,a.jsxs)("div",{className:"bg-slate-800 h-full",children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold text-white",children:"Add Text"}),(0,a.jsx)(E,{sampleText:"Title",fontSize:28,fontWeight:600}),(0,a.jsx)(E,{sampleText:"Subtitle",fontSize:16,fontWeight:600}),(0,a.jsx)(E,{sampleText:"Body",fontSize:14,fontWeight:400}),(0,a.jsx)(E,{sampleText:"Caption",fontSize:12,fontWeight:400}),(0,a.jsx)(E,{sampleText:"Heading 1",fontSize:24,fontWeight:800}),(0,a.jsx)(E,{sampleText:"Heading 2",fontSize:20,fontWeight:800}),(0,a.jsx)(E,{sampleText:"Heading 3",fontSize:18,fontWeight:800}),(0,a.jsx)(E,{sampleText:"Heading 4",fontSize:16,fontWeight:800}),(0,a.jsx)(E,{sampleText:"Heading 5",fontSize:14,fontWeight:800}),(0,a.jsx)(E,{sampleText:"Heading 6",fontSize:12,fontWeight:800})]})),T=(0,r.Pi)(e=>{let{video:t,index:i}=e,n=s.useContext(l.StoreContext),r=s.useRef(null),[o,c]=s.useState("00:00");return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative",children:[(0,a.jsx)("div",{className:"bg-[rgba(0,0,0,.25)] text-white py-1 absolute text-base top-2 right-2",children:o}),(0,a.jsx)("button",{className:"hover:bg-[#00a0f5] bg-[rgba(0,0,0,.25)] rounded z-10 text-white font-bold py-1 absolute text-lg bottom-2 right-2",onClick:()=>n.addVideo(i),children:(0,a.jsx)(d.x06,{size:"25"})}),(0,a.jsx)("video",{onLoadedData:()=>{var e,t;let i=null!==(t=null===(e=r.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:0;c((0,u.F2)(i))},ref:r,className:"max-h-[100px] max-w-[150px]",src:t,height:200,width:200,id:"video-".concat(i)})]})}),S=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Add Video"}),e.videos.map((e,t)=>(0,a.jsx)(T,{video:e,index:t},e)),(0,a.jsx)(g,{accept:"video/mp4,video/x-m4v,video/*",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold text-center mx-2 py-2 px-4 rounded",onChange:t=>{var i;let a=null===(i=t.target.files)||void 0===i?void 0:i[0];a&&e.addVideoResource(URL.createObjectURL(a))}})]})}),F={blackAndWhite:"Black and White",none:"None",saturate:"Saturate",sepia:"Sepia",invert:"Invert"},I=(0,r.Pi)(e=>{let t=s.useContext(l.StoreContext);return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden items-center bg-slate-800 m-[15px] flex flex-col relative min-h-[100px] p-2",children:[(0,a.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,a.jsx)("div",{className:"text-white py-1 text-base text-left w-full",children:F[e.editorElement.properties.effect.type]})}),(0,a.jsx)("select",{className:"bg-slate-100 text-black rounded-lg px-2 py-1 ml-2 w-16 text-xs",value:e.editorElement.properties.effect.type,onChange:i=>{let a=i.target.value;t.updateEffect(e.editorElement.id,{type:a})},children:Object.keys(F).map(e=>(0,a.jsx)("option",{value:e,children:F[e]},e))})]})});var k=i(287);let O=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext),t=e.selectedElement;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-sm px-[16px] pt-[16px] pb-[8px] font-semibold",children:"Effects"}),t&&((0,k.Lb)(t)||(0,k.AH)(t))?(0,a.jsx)(I,{editorElement:t}):null]})}),A=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext),t=e.selectedMenuOption;return(0,a.jsxs)(a.Fragment,{children:["Video"===t?(0,a.jsx)(S,{}):null,"Audio"===t?(0,a.jsx)(v,{}):null,"Image"===t?(0,a.jsx)(C,{}):null,"Text"===t?(0,a.jsx)(N,{}):null,"Animation"===t?(0,a.jsx)(x,{}):null,"Effect"===t?(0,a.jsx)(O,{}):null,"Export"===t?(0,a.jsx)(o,{}):null,"Fill"===t?(0,a.jsx)(y,{}):null]})}),M=(0,r.Pi)(e=>{var t;let i=s.useContext(l.StoreContext),{element:n}=e,r="video"===n.type?d.laJ:d.FxN,o=(null===(t=i.selectedElement)||void 0===t?void 0:t.id)===n.id,c=o?"rgba(0, 160, 245, 0.1)":"";return(0,a.jsxs)("div",{style:{backgroundColor:c},className:"flex mx-2 my-1 py-2 px-1 flex-row justify-start items-center ".concat(c," max-w-[200px]"),onClick:()=>{i.setSelectedElement(n)},children:[(0,a.jsx)(r,{size:"20",color:"gray"}),(0,a.jsx)("div",{className:"truncate text-xs ml-2 flex-1 font-medium",children:n.name}),(0,a.jsxs)("div",{children:["video"===n.type?(0,a.jsx)("video",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:n.properties.src,onLoad:()=>{i.refreshElements()},onLoadedData:()=>{i.refreshElements()},height:20,width:20,id:n.properties.elementId}):null,"image"===n.type?(0,a.jsx)("img",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:n.properties.src,onLoad:()=>{i.refreshElements()},onLoadedData:()=>{i.refreshElements()},height:20,width:20,id:n.properties.elementId}):null,"audio"===n.type?(0,a.jsx)("audio",{className:"opacity-0 max-w-[20px] max-h-[20px]",src:n.properties.src,onLoad:()=>{i.refreshElements()},onLoadedData:()=>{i.refreshElements()},id:n.properties.elementId}):null]}),(0,a.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white mr-2 text-xs py-0 px-1 rounded",onClick:e=>{i.removeEditorElement(n.id),i.refreshElements(),e.preventDefault(),e.stopPropagation()},children:"X"})]},n.id)}),P=(0,r.Pi)(e=>{let t=s.useContext(l.StoreContext);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex flex-row justify-between",children:(0,a.jsx)("div",{className:"text-sm px-[16px] py-[7px] font-semibold",children:"Elements"})}),(0,a.jsx)("div",{className:"flex flex-col",children:t.editorElements.map(e=>(0,a.jsx)(M,{element:e},e.id))})]})}),z=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,a.jsx)("div",{className:"flex justify-center items-center w-full md:flex-col",children:W.map(t=>(0,a.jsxs)("button",{onClick:()=>t.action(e),className:"py-4 px-2 w-full flex flex-col items-center text-xs",children:[(0,a.jsx)(t.icon,{className:"",size:"20",color:e.selectedMenuOption===t.name?"#00a0f5":"black"}),(0,a.jsx)("div",{className:e.selectedMenuOption===t.name?"font-semibold":"font-light",children:t.name})]},t.name))})}),W=[{name:"Video",icon:d.dnC,action:e=>{e.setSelectedMenuOption("Video")}},{name:"Audio",icon:d.ibD,action:e=>{e.setSelectedMenuOption("Audio")}},{name:"Image",icon:d.e0s,action:e=>{e.setSelectedMenuOption("Image")}},{name:"Text",icon:d.SQS,action:e=>{e.setSelectedMenuOption("Text")}},{name:"Animation",icon:d.mi9,action:e=>{e.setSelectedMenuOption("Animation")}},{name:"Effects",icon:d._9Q,action:e=>{e.setSelectedMenuOption("Effect")}},{name:"Fill",icon:d.Yu2,action:e=>{e.setSelectedMenuOption("Fill")}},{name:"Export",icon:d.uKn,action:e=>{e.setSelectedMenuOption("Export")}}];var L=i(9308);let X=(0,L.Pi)(e=>{let t=(0,s.useContext)(l.StoreContext),i=t.playing?d.hPq:d.Nhx,n=(0,u.Bw)(t.currentTimeInMs),r=(0,u.Bw)(t.maxTime);return(0,a.jsxs)("div",{className:"seek-player w-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center px-2",children:[(0,a.jsx)("button",{className:"w-[80px] rounded  px-2 py-2",onClick:()=>{t.setPlaying(!t.playing)},children:(0,a.jsx)(i,{size:"40"})}),(0,a.jsx)("span",{className:"font-mono",children:n}),(0,a.jsx)("div",{className:"w-[1px] h-[25px] bg-slate-300 mx-[10px]"}),(0,a.jsx)("span",{className:"font-mono",children:r})]}),(0,a.jsx)("input",{className:"w-full",type:"range",min:0,max:t.maxTime,value:t.currentTimeInMs,onChange:e=>{t.handleSeek(parseInt(e.target.value))}})]})});var R=function(e){let t=(0,s.useRef)({div:null,isDragging:!1,initialMouseX:0}),{current:i}=t;function n(t){if(!i.div)return 0;let a=t-i.initialMouseX,n=a/i.div.parentElement.clientWidth*e.total;return e.value+n}let l=(0,s.useCallback)(t=>{i.div&&i.isDragging&&(i.div.style.left="".concat(n(t.clientX)/e.total*100,"%"),t.stopPropagation(),t.preventDefault())},[n]),r=(0,s.useCallback)(t=>{i.div&&i.isDragging&&(i.isDragging=!1,e.onChange(n(t.clientX)),t.stopPropagation(),t.preventDefault())},[n]);return(0,s.useEffect)(()=>(window.addEventListener("mouseup",r),window.addEventListener("mousemove",l),()=>{window.removeEventListener("mouseup",r),window.removeEventListener("mousemove",l)}),[r,l]),(0,a.jsx)("div",{ref:e=>{i.div=e},className:"absolute height-100 ".concat(e.className),style:{left:e.value/e.total*100+"%",top:0,bottom:0,...e.style},onMouseDown:t=>{i.div&&(e.disabled||(i.isDragging=!0,i.initialMouseX=t.clientX))},children:e.children})};let Y=(0,r.Pi)(e=>{var t;let i=s.useContext(l.StoreContext),{element:n}=e,r="audio"===n.type,o=(null===(t=i.selectedElement)||void 0===t?void 0:t.id)===n.id,d=r?"cursor-no-drop":"cursor-ew-resize";return(0,a.jsxs)("div",{onClick:()=>{i.setSelectedElement(n)},className:"relative width-full h-[25px] my-2 ".concat(o?"border-2 border-indigo-600 bg-slate-200":""),children:[(0,a.jsx)(R,{className:"z-10",value:n.timeFrame.start,total:i.maxTime,disabled:r,onChange:e=>{i.updateEditorElementTimeFrame(n,{start:e})},children:(0,a.jsx)("div",{className:"bg-white border-2 border-blue-400 w-[10px] h-[10px] mt-[calc(25px/2)] translate-y-[-50%] transform translate-x-[-50%] ".concat(d)})}),(0,a.jsx)(R,{className:r?"cursor-no-drop":"cursor-col-resize",value:n.timeFrame.start,disabled:r,style:{width:"".concat((n.timeFrame.end-n.timeFrame.start)/i.maxTime*100,"%")},total:i.maxTime,onChange:e=>{let{start:t,end:a}=n.timeFrame;i.updateEditorElementTimeFrame(n,{start:e,end:e+(a-t)})},children:(0,a.jsx)("div",{className:"".concat(o?"bg-slate-800":"bg-slate-600"," h-full w-full text-white text-xs min-w-[0px] px-2 leading-[25px]"),children:n.name})}),(0,a.jsx)(R,{className:"z-10",disabled:r,value:n.timeFrame.end,total:i.maxTime,onChange:e=>{i.updateEditorElementTimeFrame(n,{end:e})},children:(0,a.jsx)("div",{className:"bg-white border-2 border-blue-400 w-[10px] h-[10px] mt-[calc(25px/2)] translate-y-[-50%] transform translate-x-[-50%] ".concat(d)})})]},n.id)}),B=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext),t=e.currentTimeInMs/e.maxTime*100;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X,{}),(0,a.jsxs)("div",{className:"relative height-auto",children:[(0,a.jsx)("div",{className:"w-[2px] bg-red-400 absolute top-0 bottom-0 z-20",style:{left:"".concat(t,"%")}}),e.editorElements.map(e=>(0,a.jsx)(Y,{element:e},e.id))]})]})}),H=(0,r.Pi)(()=>{let e=s.useContext(l.StoreContext);return(0,s.useEffect)(()=>{let t=new n.fabric.Canvas("canvas",{height:500,width:800,backgroundColor:"#ededed"});n.fabric.Object.prototype.transparentCorners=!1,n.fabric.Object.prototype.cornerColor="#00a0f5",n.fabric.Object.prototype.cornerStyle="circle",n.fabric.Object.prototype.cornerStrokeColor="#0063d8",n.fabric.Object.prototype.cornerSize=10,t.on("mouse:down",function(t){t.target||e.setSelectedElement(null)}),e.setCanvas(t),n.fabric.util.requestAnimFrame(function e(){t.renderAll(),n.fabric.util.requestAnimFrame(e)})},[]),(0,a.jsxs)("div",{className:" mt-11 lg:grid lg:grid-rows-[20px_500px_1fr] lg:grid-cols-[60px_200px_800px_1fr] w-full h-[100%]",children:[(0,a.jsx)("div",{className:"tile  row-span-2 flex flex-col",children:(0,a.jsx)(z,{})}),(0,a.jsx)("div",{className:"row-span-2 flex flex-col overflow-auto",children:(0,a.jsx)(A,{})}),(0,a.jsx)("canvas",{id:"canvas",className:"h-[500px] w-[800px]  row col-start-3"}),(0,a.jsx)("div",{className:"col-start-4 row-start-2",children:(0,a.jsx)(P,{})}),(0,a.jsx)("div",{className:"col-start-3 row-start-3 col-span-2 relative overflow-scroll px-[10px] py-[4px]",children:(0,a.jsx)(B,{})})]})})},287:function(e,t,i){"use strict";i.d(t,{AH:function(){return c},Lb:function(){return m},yh:function(){return o}});var a=i(4357),n=i(1003),s=i(2650),l=i(5459),r=i(7596);class o{get currentTimeInMs(){return 1e3*this.currentKeyFrame/this.fps}setCurrentTimeInMs(e){this.currentKeyFrame=Math.floor(e/1e3*this.fps)}setSelectedMenuOption(e){this.selectedMenuOption=e}setCanvas(e){this.canvas=e,e&&(e.backgroundColor=this.backgroundColor)}setBackgroundColor(e){this.backgroundColor=e,this.canvas&&(this.canvas.backgroundColor=e)}updateEffect(e,t){let i=this.editorElements.findIndex(t=>t.id===e),a=this.editorElements[i];(c(a)||m(a))&&(a.properties.effect=t),this.refreshElements()}setVideos(e){this.videos=e}addVideoResource(e){this.videos=[...this.videos,e]}addAudioResource(e){this.audios=[...this.audios,e]}addImageResource(e){this.images=[...this.images,e]}addAnimation(e){this.animations=[...this.animations,e],this.refreshAnimations()}updateAnimation(e,t){let i=this.animations.findIndex(t=>t.id===e);this.animations[i]=t,this.refreshAnimations()}refreshAnimations(){l.Z.remove(this.animationTimeLine),this.animationTimeLine=l.Z.timeline({duration:this.maxTime,autoplay:!1});for(let l=0;l<this.animations.length;l++){var e,t,i,a,s,o,d;let c=this.animations[l],m=this.editorElements.find(e=>e.id===c.targetId),h=null==m?void 0:m.fabricObject;if(m&&h)switch(h.clipPath=void 0,c.type){case"fadeIn":this.animationTimeLine.add({opacity:[0,1],duration:c.duration,targets:h,easing:"linear"},m.timeFrame.start);break;case"fadeOut":this.animationTimeLine.add({opacity:[1,0],duration:c.duration,targets:h,easing:"linear"},m.timeFrame.end-c.duration);break;case"slideIn":{let a=c.properties.direction,s={left:m.placement.x,top:m.placement.y},l={left:"left"===a?-m.placement.width:"right"===a?null===(e=this.canvas)||void 0===e?void 0:e.width:m.placement.x,top:"top"===a?-m.placement.height:"bottom"===a?null===(t=this.canvas)||void 0===t?void 0:t.height:m.placement.y};if(c.properties.useClipPath){let e=r.xe.getClipMaskRect(m,50);h.set("clipPath",e)}if("text"===m.type&&"character"===c.properties.textType){null===(i=this.canvas)||void 0===i||i.remove(...m.properties.splittedTexts),m.properties.splittedTexts=function(e,t){var i,a,s;let l=[],r=(null!==(i=e.text)&&void 0!==i?i:"").split("").filter(e=>"\n"!==e),o=e.__charBounds;if(!o)return[];let d=o.map((e,t)=>e.slice(0,e.length-1).map(e=>({m:e,index:t}))).flat(),c=e.getHeightOfLine(0);for(let i=0;i<r.length;i++){if(!d[i])continue;let{m:o,index:m}=d[i],h=r[i],p=null!==(a=e.scaleX)&&void 0!==a?a:1,u=null!==(s=e.scaleY)&&void 0!==s?s:1,x=new n.fabric.Text(h,{left:o.left*p+t.placement.x,scaleX:p,scaleY:u,top:m*c*u+t.placement.y,fontSize:e.fontSize,fontWeight:e.fontWeight,fill:"#fff"});l.push(x)}return l}(m.fabricObject||" ",m),m.properties.splittedTexts.forEach(e=>{this.canvas.add(e)});let e=c.duration/2,t=e/m.properties.splittedTexts.length;for(let i=0;i<m.properties.splittedTexts.length;i++){let a=m.properties.splittedTexts[i],n={left:a.left-m.placement.x,top:a.top-m.placement.y};this.animationTimeLine.add({left:[l.left+n.left,s.left+n.left],top:[l.top+n.top,s.top+n.top],delay:i*t,duration:e,targets:a},m.timeFrame.start)}this.animationTimeLine.add({opacity:[1,0],duration:1,targets:h,easing:"linear"},m.timeFrame.start),this.animationTimeLine.add({opacity:[0,1],duration:1,targets:h,easing:"linear"},m.timeFrame.start+c.duration),this.animationTimeLine.add({opacity:[0,1],duration:1,targets:m.properties.splittedTexts,easing:"linear"},m.timeFrame.start),this.animationTimeLine.add({opacity:[1,0],duration:1,targets:m.properties.splittedTexts,easing:"linear"},m.timeFrame.start+c.duration)}this.animationTimeLine.add({left:[l.left,s.left],top:[l.top,s.top],duration:c.duration,targets:h,easing:"linear"},m.timeFrame.start);break}case"slideOut":{let e=c.properties.direction,t={left:m.placement.x,top:m.placement.y},i={left:"left"===e?-m.placement.width:"right"===e?null===(a=this.canvas)||void 0===a?void 0:a.width:m.placement.x,top:"top"===e?-100-m.placement.height:"bottom"===e?null===(s=this.canvas)||void 0===s?void 0:s.height:m.placement.y};if(c.properties.useClipPath){let e=r.xe.getClipMaskRect(m,50);h.set("clipPath",e)}this.animationTimeLine.add({left:[t.left,i.left],top:[t.top,i.top],duration:c.duration,targets:h,easing:"linear"},m.timeFrame.end-c.duration);break}case"breathe":{let e=this.animations.find(e=>e.targetId===c.targetId&&"slideIn"===e.type),t=this.animations.find(e=>e.targetId===c.targetId&&"slideOut"===e.type),i=e?m.timeFrame.start+e.duration:m.timeFrame.start,a=t?m.timeFrame.end-t.duration:m.timeFrame.end;if(i>a)continue;let n=a-i,s=6e4/72*4,l=null!==(o=h.scaleX)&&void 0!==o?o:1,r=null!==(d=h.scaleY)&&void 0!==d?d:1,p=1.05*l,u=1.05*r,x=Math.floor(n/s);if(x<1)continue;let f=[];for(let e=0;e<x;e++)f.push({scaleX:p,scaleY:u}),f.push({scaleX:l,scaleY:r});this.animationTimeLine.add({duration:n,targets:h,keyframes:f,easing:"linear",loop:!0},i)}}}}removeAnimation(e){this.animations=this.animations.filter(t=>t.id!==e),this.refreshAnimations()}setSelectedElement(e){this.selectedElement=e,this.canvas&&((null==e?void 0:e.fabricObject)?this.canvas.setActiveObject(e.fabricObject):this.canvas.discardActiveObject())}updateSelectedElement(){var e;this.selectedElement=null!==(e=this.editorElements.find(e=>{var t;return e.id===(null===(t=this.selectedElement)||void 0===t?void 0:t.id)}))&&void 0!==e?e:null}setEditorElements(e){this.editorElements=e,this.updateSelectedElement(),this.refreshElements()}updateEditorElement(e){this.setEditorElements(this.editorElements.map(t=>t.id===e.id?e:t))}updateEditorElementTimeFrame(e,t){void 0!=t.start&&t.start<0&&(t.start=0),void 0!=t.end&&t.end>this.maxTime&&(t.end=this.maxTime);let i={...e,timeFrame:{...e.timeFrame,...t}};this.updateVideoElements(),this.updateAudioElements(),this.updateEditorElement(i),this.refreshAnimations()}addEditorElement(e){this.setEditorElements([...this.editorElements,e]),this.refreshElements(),this.setSelectedElement(this.editorElements[this.editorElements.length-1])}removeEditorElement(e){this.setEditorElements(this.editorElements.filter(t=>t.id!==e)),this.refreshElements()}setMaxTime(e){this.maxTime=e}setPlaying(e){this.playing=e,this.updateVideoElements(),this.updateAudioElements(),e&&(this.startedTime=Date.now(),this.startedTimePlay=this.currentTimeInMs,requestAnimationFrame(()=>{this.playFrames()}))}playFrames(){if(!this.playing)return;let e=Date.now()-this.startedTime,t=this.startedTimePlay+e;this.updateTimeTo(t),t>this.maxTime?(this.currentKeyFrame=0,this.setPlaying(!1)):requestAnimationFrame(()=>{this.playFrames()})}updateTimeTo(e){this.setCurrentTimeInMs(e),this.animationTimeLine.seek(e),this.canvas&&(this.canvas.backgroundColor=this.backgroundColor),this.editorElements.forEach(t=>{if(!t.fabricObject)return;let i=t.timeFrame.start<=e&&e<=t.timeFrame.end;t.fabricObject.visible=i})}handleSeek(e){this.playing&&this.setPlaying(!1),this.updateTimeTo(e),this.updateVideoElements(),this.updateAudioElements()}addVideo(e){let t=document.getElementById("video-".concat(e));if(!(0,s.BZ)(t))return;let i=1e3*t.duration,a=t.videoWidth/t.videoHeight,n=(0,s.sq)();this.addEditorElement({id:n,name:"Media(video) ".concat(e+1),type:"video",placement:{x:0,y:0,width:100*a,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:i},properties:{elementId:"video-".concat(n),src:t.src,effect:{type:"none"}}})}addImage(e){let t=document.getElementById("image-".concat(e));if(!(0,s.ni)(t))return;let i=t.naturalWidth/t.naturalHeight,a=(0,s.sq)();this.addEditorElement({id:a,name:"Media(image) ".concat(e+1),type:"image",placement:{x:0,y:0,width:100*i,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:this.maxTime},properties:{elementId:"image-".concat(a),src:t.src,effect:{type:"none"}}})}addAudio(e){let t=document.getElementById("audio-".concat(e));if(!(0,s.RA)(t))return;let i=1e3*t.duration,a=(0,s.sq)();this.addEditorElement({id:a,name:"Media(audio) ".concat(e+1),type:"audio",placement:{x:0,y:0,width:100,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:i},properties:{elementId:"audio-".concat(a),src:t.src}})}addText(e){let t=(0,s.sq)(),i=this.editorElements.length;this.addEditorElement({id:t,name:"Text ".concat(i+1),type:"text",placement:{x:0,y:0,width:100,height:100,rotation:0,scaleX:1,scaleY:1},timeFrame:{start:0,end:this.maxTime},properties:{text:e.text,fontSize:e.fontSize,fontWeight:e.fontWeight,splittedTexts:[]}})}updateVideoElements(){this.editorElements.filter(e=>"video"===e.type).forEach(e=>{let t=document.getElementById(e.properties.elementId);if((0,s.BZ)(t)){let i=(this.currentTimeInMs-e.timeFrame.start)/1e3;t.currentTime=i,this.playing?t.play():t.pause()}})}updateAudioElements(){this.editorElements.filter(e=>"audio"===e.type).forEach(e=>{let t=document.getElementById(e.properties.elementId);if((0,s.RA)(t)){let i=(this.currentTimeInMs-e.timeFrame.start)/1e3;t.currentTime=i,this.playing?t.play():t.pause()}})}saveCanvasToVideoWithAUdio(){let e=document.getElementById("canvas"),t=e.captureStream(30),i=this.editorElements.filter(d),a=[];i.forEach(e=>{let t=document.getElementById(e.properties.elementId),i=new AudioContext,n=i.createMediaElementSource(t),s=i.createMediaStreamDestination();n.connect(s),n.connect(i.destination),a.push(s.stream)}),a.forEach(e=>{t.addTrack(e.getAudioTracks()[0])});let n=document.createElement("video");n.srcObject=t,n.height=500,n.width=800,n.play().then(()=>{let e=new MediaRecorder(t),i=[];e.ondataavailable=function(e){i.push(e.data),console.log("data available")},e.onstop=function(e){let t=new Blob(i,{type:"video/webm"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="video.webm",n.click()},e.start(),setTimeout(()=>{e.stop()},this.maxTime),n.remove()})}refreshElements(){let e=this;if(!e.canvas)return;let t=e.canvas;e.canvas.remove(...e.canvas.getObjects());for(let i=0;i<e.editorElements.length;i++){let a=e.editorElements[i];switch(a.type){case"video":{if(console.log("elementid",a.properties.elementId),null==document.getElementById(a.properties.elementId))continue;let i=document.getElementById(a.properties.elementId);if(!(0,s.BZ)(i))continue;let l=new n.fabric.CoverVideo(i,{name:a.id,left:a.placement.x,top:a.placement.y,width:a.placement.width,height:a.placement.height,scaleX:a.placement.scaleX,scaleY:a.placement.scaleY,angle:a.placement.rotation,objectCaching:!1,selectable:!0,lockUniScaling:!0,customFilter:a.properties.effect.type});a.fabricObject=l,a.properties.imageObject=l,i.width=100,i.height=100*i.videoHeight/i.videoWidth,t.add(l),t.on("object:modified",function(t){var i,n,s;if(!t.target)return;let r=t.target;if(r!=l)return;let o=a.placement,d={...o,x:null!==(i=r.left)&&void 0!==i?i:o.x,y:null!==(n=r.top)&&void 0!==n?n:o.y,rotation:null!==(s=r.angle)&&void 0!==s?s:o.rotation,width:r.width&&r.scaleX?r.width*r.scaleX:o.width,height:r.height&&r.scaleY?r.height*r.scaleY:o.height,scaleX:1,scaleY:1},c={...a,placement:d};e.updateEditorElement(c)});break}case"image":{if(null==document.getElementById(a.properties.elementId))continue;let i=document.getElementById(a.properties.elementId);if(!(0,s.ni)(i))continue;let l=new n.fabric.CoverImage(i,{name:a.id,left:a.placement.x,top:a.placement.y,angle:a.placement.rotation,objectCaching:!1,selectable:!0,lockUniScaling:!0,customFilter:a.properties.effect.type});a.fabricObject=l,a.properties.imageObject=l;let r={w:i.naturalWidth,h:i.naturalHeight};l.width=r.w,l.height=r.h,i.width=r.w,i.height=r.h,l.scaleToHeight(r.w),l.scaleToWidth(r.h);let o={x:a.placement.width/r.w,y:a.placement.height/r.h};l.scaleX=o.x*a.placement.scaleX,l.scaleY=o.y*a.placement.scaleY,t.add(l),t.on("object:modified",function(t){var i,n,s;if(!t.target)return;let r=t.target;if(r!=l)return;let d=a.placement,c=1;r.scaleX&&r.scaleX>0&&(c=r.scaleX/o.x);let m={...d,x:null!==(i=r.left)&&void 0!==i?i:d.x,y:null!==(n=r.top)&&void 0!==n?n:d.y,rotation:null!==(s=r.angle)&&void 0!==s?s:d.rotation,scaleX:c,scaleY:c},h={...a,placement:m};e.updateEditorElement(h)});break}case"audio":break;case"text":{let i=new n.fabric.Textbox(a.properties.text,{name:a.id,left:a.placement.x,top:a.placement.y,scaleX:a.placement.scaleX,scaleY:a.placement.scaleY,width:a.placement.width,height:a.placement.height,angle:a.placement.rotation,fontSize:a.properties.fontSize,fontWeight:a.properties.fontWeight,objectCaching:!1,selectable:!0,lockUniScaling:!0,fill:"#ffffff"});a.fabricObject=i,t.add(i),t.on("object:modified",function(t){var n,s,l,r,o,d,c;if(!t.target)return;let m=t.target;if(m!=i)return;let h=a.placement,p={...h,x:null!==(n=m.left)&&void 0!==n?n:h.x,y:null!==(s=m.top)&&void 0!==s?s:h.y,rotation:null!==(l=m.angle)&&void 0!==l?l:h.rotation,width:null!==(r=m.width)&&void 0!==r?r:h.width,height:null!==(o=m.height)&&void 0!==o?o:h.height,scaleX:null!==(d=m.scaleX)&&void 0!==d?d:h.scaleX,scaleY:null!==(c=m.scaleY)&&void 0!==c?c:h.scaleY},u={...a,placement:p,properties:{...a.properties,text:null==m?void 0:m.text}};e.updateEditorElement(u)});break}default:throw Error("Not implemented")}a.fabricObject&&a.fabricObject.on("selected",function(t){e.setSelectedElement(a)})}let i=e.selectedElement;i&&i.fabricObject&&t.setActiveObject(i.fabricObject),this.refreshAnimations(),this.updateTimeTo(this.currentTimeInMs),e.canvas.renderAll()}constructor(){this.startedTime=0,this.startedTimePlay=0,this.canvas=null,this.videos=[],this.images=[],this.audios=[],this.editorElements=[],this.backgroundColor="#111111",this.maxTime=3e4,this.playing=!1,this.currentKeyFrame=0,this.selectedElement=null,this.fps=60,this.animations=[],this.animationTimeLine=l.Z.timeline(),this.selectedMenuOption="Video",(0,a.ky)(this)}}function d(e){return"audio"===e.type}function c(e){return"video"===e.type}function m(e){return"image"===e.type}},9297:function(e,t,i){"use strict";i.r(t),i.d(t,{StoreContext:function(){return l},StoreProvider:function(){return r}});var a=i(9268),n=i(6006),s=i(287);let l=(0,n.createContext)(new s.yh);function r(e){let[t]=n.useState(new s.yh);return(0,a.jsx)(l.Provider,{value:t,children:e.children})}},7596:function(e,t,i){"use strict";i.d(t,{xe:function(){return r}});var a=i(1003);let n=a.fabric.util.createClass(a.fabric.Image,{type:"coverImage",customFilter:"none",disableCrop:!1,cropWidth:0,cropHeight:0,initialize(e,t){t=t||{},t=Object.assign({cropHeight:this.height,cropWidth:this.width},t),this.callSuper("initialize",e,t)},getCrop(e,t){let i,a;let n=t.width,s=t.height,l=n/s,r=e.width/e.height;l>=r?(i=e.width,a=e.width/l):(i=e.height*l,a=e.height);let o=(e.width-i)/2,d=(e.height-a)/2;return{cropX:o,cropY:d,cropWidth:i,cropHeight:a}},_render(e){if(this.disableCrop){this.callSuper("_render",e);return}let t=this.width,i=this.height,a=this.getCrop(this.getOriginalSize(),{width:this.getScaledWidth(),height:this.getScaledHeight()}),{cropX:n,cropY:s,cropWidth:r,cropHeight:o}=a;e.save();let d=this.customFilter;e.filter=l(d),e.drawImage(this._element,Math.max(n,0),Math.max(s,0),Math.max(1,r),Math.max(1,o),-t/2,-i/2,Math.max(0,t),Math.max(0,i)),e.filter="none",e.restore()}}),s=a.fabric.util.createClass(a.fabric.Image,{type:"coverVideo",customFilter:"none",disableCrop:!1,cropWidth:0,cropHeight:0,initialize(e,t){t=t||{},t=Object.assign({cropHeight:this.height,cropWidth:this.width},t),this.callSuper("initialize",e,t)},getCrop(e,t){let i,a;let n=t.width,s=t.height,l=n/s,r=e.width/e.height;l>=r?(i=e.width,a=e.width/l):(i=e.height*l,a=e.height);let o=(e.width-i)/2,d=(e.height-a)/2;return{cropX:o,cropY:d,cropWidth:i,cropHeight:a}},_render(e){if(this.disableCrop){this.callSuper("_render",e);return}let t=this.width,i=this.height,a=this.getCrop(this.getOriginalSize(),{width:this.getScaledWidth(),height:this.getScaledHeight()}),{cropX:n,cropY:s,cropWidth:r,cropHeight:o}=a,d=this._element,c=d.width/d.videoWidth,m=d.height/d.videoHeight;e.save();let h=this.customFilter;e.filter=l(h),e.drawImage(this._element,Math.max(n,0)/c,Math.max(s,0)/m,Math.max(1,r)/c,Math.max(1,o)/m,-t/2,-i/2,Math.max(0,t),Math.max(0,i)),e.filter="none",e.restore()}});function l(e){switch(e){case"blackAndWhite":return"grayscale(100%)";case"sepia":return"sepia(100%)";case"invert":return"invert(100%)";case"saturate":return"saturate(100%)";default:return"none"}}a.fabric.CoverImage=n,a.fabric.CoverVideo=s;class r{static getClipMaskRect(e,t){let i=t/e.placement.scaleX,n=i/e.placement.scaleY,s=new a.fabric.Rect({left:e.placement.x-i,top:e.placement.y-n,width:e.placement.width+2*i,height:e.placement.height+2*n,scaleX:e.placement.scaleX,scaleY:e.placement.scaleY,absolutePositioned:!0,fill:"transparent",stroke:"transparent",opacity:.5,strokeWidth:0});return s}}},2650:function(e,t,i){"use strict";function a(){return Math.random().toString(36).substring(2,9)}function n(e){return!!e&&"VIDEO"===e.tagName}function s(e){return!!e&&"IMG"===e.tagName}function l(e){return!!e&&"AUDIO"===e.tagName}function r(e){return"".concat(Math.floor(e/60),":").concat(d(Math.floor(e%60),2))}function o(e){let t=Math.floor(e%1e3/10);return r(e/1e3)+".".concat(d(t,2))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")}i.d(t,{BZ:function(){return n},Bw:function(){return o},F2:function(){return r},RA:function(){return l},ni:function(){return s},sq:function(){return a}})}},function(e){e.O(0,[625,749,724,293,253,698,744],function(){return e(e.s=9450)}),_N_E=e.O()}]);